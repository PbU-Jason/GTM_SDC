---
import Layout from '~/layouts/PageLayout.astro';

import Hero from '~/components/widgets/Hero.astro';
import Features_index from '~/components/widgets/Features_index.astro';
import Steps from '~/components/widgets/Steps.astro';
import Content from '~/components/widgets/Content.astro';
import Content2 from '~/components/widgets/Content2.astro';
import Content3 from '~/components/widgets/Content3.astro';
import Stats from '~/components/widgets/Stats.astro';

// import { MyComponent } from '~/utils/react_html.jsx';

const metadata = {
  title: 'GTM',
  ignoreTitleTemplate: true,
};

---

<Layout metadata={metadata}>

  <!-- Hero Widget ******************* -->
  <Hero
    callToAction={{ text: 'Visit TASA', href: 'https://www.tasa.org.tw/inprogress.php?c=20022401&ln=zh_TW#', icon: 'tabler:building' }}
    callToAction2={{ text: 'View GitHub', href: 'https://github.com/PbU-Jason/GTM_SDC', icon: 'tabler:brand-github' }}
    image={{ src: '/images/GTM_assembly_1.jpg', alt: 'GTM Image 1' }}
  >

    <Fragment slot="title">
      Gamma-ray Transients Monitor
    </Fragment>

    <Fragment slot="subtitle">
      <span class="hidden sm:inline">
        The first space astronomical telescope of Taiwan on board Formosat-8B
      </span>
    </Fragment>

  </Hero>

  <!-- Content Widget **************** -->
  <Content
    isReversed
    tagline="Introduction"
    title="What is GTM?"
    items={[
      {
        title: 'Science',
        description:
          'The goal of GTM is to monitor Gamma-Ray Bursts (GRBs) and other bright gamma-ray transients in the space.',
      },
      {
        title: 'Instrument',
        description:
          'GTM consists of two identical modules located on two opposite sides of FS-8B. Each module has four sensor units facing different directions to cover half of the sky. The two modules will then cover the whole sky, including the direction occulted by the Earth. Each sensor unit is composed of a GAGG scintillator array to be readout by SiPM with 16 pixel-channels.',
      },
    ]}
    image={{ src: '/images/GTM_assembly_2.jpg', alt: 'GTM Image 2' }}
  >

    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">Mission Overview</h3>
      The Gamma-ray Transients Monitor (GTM) is a secondary science payload on board Formosat-8B (FS-8B), a Taiwanese remote-sensing satellite launched in 2026.
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>

  </Content>

  <!-- Steps Widget ****************** -->
  <Steps
    tagline="Timeline"
    title="Milestone"
    items={[
      {
        title: '2020.08: <span class="font-medium">Mission Start</span>',
        icon: 'tabler:player-play',
      },
      {
        title: '2022.06: <span class="font-medium">EM Assembly</span>',
        icon: 'tabler:cpu',
      },
      {
        title: '2022.09: <span class="font-medium">EQM Assembly</span>',
        icon: 'tabler:cpu',
      },
      {
        title:'2023.04: <span class="font-medium">FM Assembly</span>',
        icon: 'tabler:cpu',
      },
      {
        title:'2023.09: <span class="font-medium">Submit to TASA</span>',
        icon: 'tabler:check',
      },
      {
        title:'2023.11: <span class="font-medium">SDC Ready</span>',
        icon: 'tabler:telescope',
      },
      {
        title:'2026.01: <span class="font-medium">Launch</span>',
        icon: 'tabler:rocket',
        // description:
        //   'sfgnasdrgna',
      },
    ]}
    image={{
      src: '/images/IMG_1663.JPG',
      alt: 'Steps Image',
    }}
  >
  </Steps>

  <!-- Content2 Widget **************** -->
  <Content2
    tagline="News"
    title="The Latest GRB"
    image={{
      src: '/images/AllSykMap.png',
      alt: 'AllSykMap Image',
    }}
  >

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>

  </Content2>

  <!-- <MyComponent client:load/> -->

  <!-- <div>6666666666</div>
  <Stats
    tagline="Satellite"
    title="Real-time Position"
    stats = {[
      { title: 'Altitude', amount: '561 km' },
      { title: 'Longitude', amount: 'lon' },
      { title: 'Latitude', amount: 'lat' },
    ]
    }
  />
  <div>7777777777</div> -->

  <!-- <div>6666666666</div><section class="relative not-prose scroll-mt-[72px]"><div class="inset-0 absolute pointer-events-none -z-[1]" aria-hidden="true"><div class="inset-0 absolute"></div></div><div class="relative mx-auto px-4 md:px-6 text-default lg:py-20 md:py-16 py-12 max-w-6xl"><div class="text-center mb-8 md:mb-12 md:mx-auto max-w-3xl"><p class="font-bold dark:text-blue-200 text-base text-secondary tracking-wide uppercase">Satellite</p><h2 class="font-bold leading-tighter leading-tighter font-heading tracking-tighter mb-4 md:text-5xl text-4xl text-heading">Real-time Position</h2></div><div class="flex justify-center -m-4 flex-wrap text-center"><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl">561 km</div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">Altitude</div></div><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl">lon</div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">Longitude</div></div><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl">lat</div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">Latitude</div></div></div></div></section><div>7777777777</div> -->

  <section class="relative not-prose scroll-mt-[72px]"><div class="inset-0 absolute pointer-events-none -z-[1]" aria-hidden="true"><div class="inset-0 absolute"></div></div><div class="relative mx-auto px-4 md:px-6 text-default lg:py-20 md:py-16 py-12 max-w-6xl"><div class="text-center mb-8 md:mb-12 md:mx-auto max-w-3xl"><p class="font-bold dark:text-blue-200 text-base text-secondary tracking-wide uppercase">Satellite</p><h2 class="font-bold leading-tighter leading-tighter font-heading tracking-tighter mb-4 md:text-5xl text-4xl text-heading">Real-time Position</h2></div><div class="flex justify-center -m-4 flex-wrap text-center"><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl" id="py_alt"></div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">Altitude</div></div><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl" id="py_lon"></div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">Longitude</div></div><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl" id="py_lat"></div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">Latitude</div></div></div></div></section>

  <!-- Content3 Widget **************** -->
  <script is:inline src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <Content3
  >
  </Content3>

  <script>
    var py_alt = document.getElementById("py_alt");
    var py_lon = document.getElementById("py_lon");
    var py_lat = document.getElementById("py_lat");
    document.addEventListener("DOMContentLoaded", function () {
      fetch('https://crab0.astr.nthu.edu.tw/ppp/')
        .then((response) => {
          return response.json()
        })
        .then((all_data) => {
          py_alt.innerHTML = `${all_data.alt} km`;
          py_lon.innerHTML = `${all_data.lon}°`;
          py_lat.innerHTML = `${all_data.lat}°`;
          var json_3d = JSON.parse(all_data.plot_json_3d);
          var json_2d = JSON.parse(all_data.plot_json_2d);
          Plotly.react('py_plot_3d', json_3d.data, json_3d.layout);
          Plotly.react('py_plot_2d', json_2d.data, json_2d.layout);
        })
        .catch((error) => {
          console.error('Error fetching data:', error);
        });
    });
  </script>

  <!-- Features Widget *************** -->
  <Features_index
    tagline="Guide"
    title="Website Content"
    items={[
      {
        title: 'Science Goal',
        icon: 'tabler:telescope',
        link: 'https://crab0.astr.nthu.edu.tw/science/',
      },
      {
        title: 'Instrument Design',
        icon: 'tabler:cpu',
        link: 'https://crab0.astr.nthu.edu.tw/instrument/',
      },
      {
        title: 'Published Paper',
        icon: 'tabler:school',
        link: 'https://crab0.astr.nthu.edu.tw/paper/',
      },
      {
        title: 'Data Catalog',
        icon: 'tabler:file-type-sql',
        link: 'https://crab0.astr.nthu.edu.tw/tt/',
      },
      {
        title: 'Data Product',
        icon: 'tabler:archive',
        link: 'https://crab0.astr.nthu.edu.tw/gtm_product/',
      },
      {
        title: 'Team Member',
        icon: 'tabler:users',
        link: 'https://crab0.astr.nthu.edu.tw/team/',
      },
    ]}
  >

  <Fragment slot="bg">
    <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
  </Fragment>

</Features_index>

</Layout>
