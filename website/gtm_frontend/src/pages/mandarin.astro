---
import Layout from '~/layouts/PageLayout.astro';

import Hero from '~/components/widgets/Hero.astro';
import Features_index from '~/components/widgets/Features_index.astro';
import Steps from '~/components/widgets/Steps.astro';
import Content from '~/components/widgets/Content.astro';
import Content2 from '~/components/widgets/Content2.astro';
import Content3 from '~/components/widgets/Content3.astro';

// import { MyComponent } from '~/utils/react_html.jsx';

const metadata = {
  title: 'GTM',
  ignoreTitleTemplate: true,
};

---

<Layout metadata={metadata}>

  <!-- Hero Widget ******************* -->
  <Hero
    callToAction={{ text: '訪問TASA', href: 'https://www.tasa.org.tw/inprogress.php?c=20022401&ln=zh_TW#', icon: 'tabler:building' }}
    callToAction2={{ text: '查看GitHub', href: 'https://github.com/PbU-Jason/GTM_SDC', icon: 'tabler:brand-github' }}
    image={{ src: '/images/GTM_assembly_1.jpg', alt: 'GTM Image 1' }}
  >

    <Fragment slot="title">
      伽瑪射線瞬變事件監測儀
    </Fragment>

    <Fragment slot="subtitle">
      <span class="hidden sm:inline">
        台灣第一個天文太空望遠鏡，搭載於福衛八號B上
      </span>
    </Fragment>

  </Hero>

  <!-- Content Widget **************** -->
  <Content
    isReversed
    tagline="介紹"
    title="GTM是什麼?"
    items={[
      {
        title: '科學',
        description:
          'GTM的科學目標是監測太空中的伽瑪射線暴(GRB)和其他明亮的伽瑪射線瞬變事件。',
      },
      {
        title: '儀器',
        description:
          'GTM由兩個相同的模塊組成，並分別安裝於FS-8B的兩側。每個模塊有四個面向不同方向的感測器單元，各自可覆蓋半個天空，因此，兩個模塊的監測範圍將覆蓋整個天空，包括被地球遮擋的方向。每個感測器單元由GAGG閃爍體陣列組成，並由具有16個像素通道的SiPM讀取。',
      },
    ]}
    image={{ src: '/images/GTM_assembly_2.jpg', alt: 'GTM Image 2' }}
  >

    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">任務概述</h3>
      伽瑪射線瞬變事件監測儀(GTM)是台灣遙測衛星福衛八號B(FS-8B)上的次要科學籌載，該衛星於2026年發射。
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>

  </Content>

  <!-- Steps Widget ****************** -->
  <Steps
    tagline="時間線"
    title="里程碑"
    items={[
      {
        title: '2020.08: <span class="font-medium">任務開始</span>',
        icon: 'tabler:player-play',
      },
      {
        title: '2022.06: <span class="font-medium">EM組裝</span>',
        icon: 'tabler:cpu',
      },
      {
        title: '2022.09: <span class="font-medium">EQM組裝</span>',
        icon: 'tabler:cpu',
      },
      {
        title:'2023.04: <span class="font-medium">FM組裝</span>',
        icon: 'tabler:cpu',
      },
      {
        title:'2023.09: <span class="font-medium">遞交給TASA</span>',
        icon: 'tabler:check',
      },
      {
        title:'2023.11: <span class="font-medium">科學中心就緒</span>',
        icon: 'tabler:telescope',
      },
      {
        title:'2026.01: <span class="font-medium">發射</span>',
        icon: 'tabler:rocket',
      },
    ]}
    image={{
      src: '/images/IMG_1663.JPG',
      alt: 'Steps Image',
    }}
  >
  </Steps>

  <!-- Content2 Widget **************** -->
  <Content2
    tagline="消息"
    title="最近期的GRB"
    image={{
      src: '/images/AllSykMap.png',
      alt: 'AllSykMap Image',
    }}
  >

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>

  </Content2>

<section class="relative not-prose scroll-mt-[72px]"><div class="inset-0 absolute pointer-events-none -z-[1]" aria-hidden="true"><div class="inset-0 absolute"></div></div><div class="relative mx-auto px-4 md:px-6 text-default lg:py-20 md:py-16 py-12 max-w-6xl"><div class="text-center mb-8 md:mb-12 md:mx-auto max-w-3xl"><p class="font-bold dark:text-blue-200 text-base text-secondary tracking-wide uppercase">衛星</p><h2 class="font-bold leading-tighter leading-tighter font-heading tracking-tighter mb-4 md:text-5xl text-4xl text-heading">實時位置</h2></div><div class="flex justify-center -m-4 flex-wrap text-center"><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl" id="py_alt"></div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">高度</div></div><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl" id="py_lon"></div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">經度</div></div><div class="w-full dark:md:border-slate-500 md:border-r md:last:border-none md:w-1/3 min-w-[220px] p-4 sm:w-1/2 text-center"><div class="font-bold dark:text-white font-heading lg:text-5xl text-[2.6rem] text-primary xl:text-6xl" id="py_lat"></div><div class="font-medium dark:text-slate-400 lg:text-base text-gray-800 text-sm tracking-widest uppercase">緯度</div></div></div></div></section>

  <!-- Content3 Widget **************** -->
  <script is:inline src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <Content3
  >
  </Content3>

  <script>
    var py_alt = document.getElementById("py_alt");
    var py_lon = document.getElementById("py_lon");
    var py_lat = document.getElementById("py_lat");
    document.addEventListener("DOMContentLoaded", function () {
      fetch('https://crab0.astr.nthu.edu.tw/ppp/')
        .then((response) => {
          return response.json()
        })
        .then((all_data) => {
          py_alt.innerHTML = `${all_data.alt} 公里`;
          py_lon.innerHTML = `${all_data.lon}°`;
          py_lat.innerHTML = `${all_data.lat}°`;
          var json_3d = JSON.parse(all_data.plot_json_3d);
          var json_2d = JSON.parse(all_data.plot_json_2d);
          Plotly.react('py_plot_3d', json_3d.data, json_3d.layout);
          Plotly.react('py_plot_2d', json_2d.data, json_2d.layout);
        })
        .catch((error) => {
          console.error('Error fetching data:', error);
        });
    });
  </script>

  <!-- Features Widget *************** -->
  <Features_index
    tagline="導覽"
    title="網站內容"
    items={[
      {
        title: '科學目標',
        icon: 'tabler:telescope',
        link: 'https://crab0.astr.nthu.edu.tw/science/',
      },
      {
        title: '儀器設計',
        icon: 'tabler:cpu',
        link: 'https://crab0.astr.nthu.edu.tw/instrument/',
      },
      {
        title: '發表論文',
        icon: 'tabler:school',
        link: 'https://crab0.astr.nthu.edu.tw/paper/',
      },
      {
        title: '數據表格',
        icon: 'tabler:file-type-sql',
        link: 'https://crab0.astr.nthu.edu.tw/tt/',
      },
      {
        title: '數據檔案',
        icon: 'tabler:archive',
        link: 'https://crab0.astr.nthu.edu.tw/gtm_product/',
      },
      {
        title: '團隊成員',
        icon: 'tabler:users',
        link: 'https://crab0.astr.nthu.edu.tw/team/',
      },
    ]}
  >

  <Fragment slot="bg">
    <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
  </Fragment>

</Features_index>

</Layout>
